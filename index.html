<html>
	<head>
  <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
  <script src="https://sdk.altvr.com/libs/altspace.js/2.9.0/altspace.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>
  <script type="text/javascript" src="card.js"></script>
  <script type="text/javascript" src="setup.js"></script>
  <script type="text/javascript" src="cardlist.js"></script>
  <script>
  	// Initialize Firebase
  	firebase.initializeApp({
  		apiKey: 'AIzaSyBwNbvo59xGQwlKzVV7xwjfKefmwtWoouw',
  		authDomain: 'altstone-22863.firebaseapp.com',
  		projectId: 'altstone-22863'
	});
	// Initialize Cloud Firestore through Firebase
	var db = firebase.firestore();
	var fbRef = db.collection("AltStone");
 </script>
 <script type="text/javascript" src="game-start.js"></script>
 <script type="text/javascript" src="join-game-button.js"></script>
 <script>
    var turnCounter = 0
  var cardArr = [];
  var cardData;
  for(var i = 53; i <= 220; i++){
    var currentCard = cardList.Basic[i]
    console.log(i);
    cardArr[i] = new Card( currentCard.name,
                           currentCard.type,
                           currentCard.playerClass,
                           currentCard.cost,
                           currentCard.attack,
                           currentCard.health,
                           currentCard.dbfId,
                           currentCard.imgGold,
                           "https://raw.githubusercontent.com/schmich/hearthstone-card-images/master/rel/" + currentCard.dbfId + ".png");
  };
  console.log(cardArr);
  var druidDeck = [ cardArr[57], //Innervate
                    cardArr[57], //Innervate
                    cardArr[68], //Claw
                    cardArr[68], //Claw
                    cardArr[126], //Mark of the Wild
                    cardArr[126], //Mark of the Wild
                    cardArr[141], //Wild Growth
                    cardArr[141], //Wild Growth
                    cardArr[187], //Swipe
                    cardArr[187], //Swipe
                    cardArr[211], //Starfire
                    cardArr[211], //Starfire
                    cardArr[219], //Ironbark Protector
                    cardArr[219], //Ironbark Protector
                    cardArr[106], //Acidic Swamp Ooze
                    cardArr[106], //Acidic Swamp Ooze
                    cardArr[109], //Bloodfen Raptor
                    cardArr[109], //Bloodfen Raptor
                    cardArr[165], //Shattered Sun Cleric 
                    cardArr[171], //Chillwind Yeti
                    cardArr[171], //Chillwind Yeti
                    cardArr[175], //Gnomish Inventor
                    cardArr[175], //Gnomish Inventor
                    cardArr[185],//Sen'jin Shieldmasta
                    cardArr[185],//Sen'jin Shieldmasta
                    cardArr[196],//Darkscale Healer
                    cardArr[206],//Boulderfist Ogre
                    cardArr[186], //Stormwind Champion
                    cardArr[186] //Stormwind Champion
                  ];
  function shuffle(deck) {
    for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
    return deck;
}
function setupGame(){
  turnCounter = 0;
  shuffle(druidDeck);
  fbRef.doc("Cards").set({

  })

};
setupGame();
 </script>
	</head>
	<body>
		<a-scene sync-system="app: AltStone; author: Winrar" altspace="fullspace: true">
      <a-assets>
        <img id="player-area" src="playerarea.jpg">
        <img id="board" src="wood-board.jpg">
        <img id="mana" src="mana.png">
      </a-assets>
      <a-plane class="card-p1" material="transparent: true; opacity: 0" position="-2.2 0.1 -0.8" rotation="270 180" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p1" material="transparent: true; color: green; opacity: 0" position="-2.2 0.1 1.5" rotation="270 180" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p1" material="transparent: true; opacity: 0" position="-3.6 0.1 -0.8" rotation="270 180" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p1" material="transparent: true; color: green; opacity: 0" position="-3.6 0.1 1.5" rotation="270 180" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p1" material="transparent: true; opacity: 0" position="-5 0.1 -0.8" rotation="270 180" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p1" material="transparent: true; color: green; opacity: 0" position="-5 0.1 1.5" rotation="270 180" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p1" material="transparent: true; opacity: 0" position="-6.4 0.1 -0.8" rotation="270 180" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p1" material="transparent: true; color: green; opacity: 0" position="-6.4 0.1 1.5" rotation="270 180" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p1" material="transparent: true; opacity: 0" position="-7.8 0.1 -0.8" rotation="270 180" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p1" material="transparent: true; color: green; opacity: 0" position="-7.8 0.1 1.5" rotation="270 180" scale="1.1 1.6 1.6"></a-plane>
      <!-- P2 CARDS -->
      <a-plane class="card-p2" material="transparent: true; opacity: 0" position="-2.2 0.1 5.8" rotation="270 0" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p2" material="transparent: true; color: green; opacity: 0" position="-2.2 0.1 3.8" rotation="270 0" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p2" material="transparent: true; opacity: 0" position="-3.6 0.1 5.8" rotation="270 0" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p2" material="transparent: true; color: green; opacity: 0" position="-3.6 0.1 3.8" rotation="270 0" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p2" material="transparent: true; opacity: 0" position="-5 0.1 5.8" rotation="270 0" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p2" material="transparent: true; color: green; opacity: 0" position="-5 0.1 3.8" rotation="270 0" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p2" material="transparent: true; opacity: 0" position="-6.4 0.1 5.8" rotation="270 0" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p2" material="transparent: true; color: green; opacity: 0" position="-6.4 0.1 3.8" rotation="270 0" scale="1.1 1.6 1.6"></a-plane>
      <a-plane class="card-p2" material="transparent: true; opacity: 0" position="-7.8 0.1 5.8" rotation="270 0" scale="1.4 1.8 1.8"></a-plane>
      <a-plane class="card-place-p2" material="transparent: true; color: green; opacity: 0" position="-7.8 0.1 3.8" rotation="270 0" scale="1.1 1.6 1.6"></a-plane>
      <!-- P1 MANA -->
      <a-entity class="mana-p1" material="opacity: 0" n-text="text: Current Mana:" scale="0.2 0.2 0.2" position="-0.8 0.1 -0.5" rotation="270 180"></a-entity>
      <a-plane class="mana-p1" material="transparent: true; src: #mana; opacity: 0" position="-0.8 0.1 -1.1" rotation="270 180" scale="1 1 1"></a-plane>
      <a-entity class="mana-p1" material="opacity: 0" n-text="text: 0 / 10" scale="0.1 0.1 0.1" position="-0.85 0.2 -1.3" rotation="270 180"></a-entity>
      <!-- P2 MANA -->
      <a-entity class="mana-p2" material="opacity: 0" n-text="text: Current Mana:" scale="0.2 0.2 0.2" position="-0.8 0.1 5.5" rotation="270 0"></a-entity>
      <a-plane class="mana-p2" material="transparent: true; src: #mana; opacity: 0" position="-0.8 0.1 6.2" rotation="270 0" scale="1 1 1"></a-plane>
      <a-entity class="mana-p2" material="opacity: 0" n-text="text: 0 / 10" scale="0.1 0.1 0.1" position="-0.8 0.2 6.4" rotation="270 0"></a-entity>
      <!-- STUFF -->
      <a-box id="p1-join-box" join-game-p1 n-box-collider="isTrigger: true; type: object; size: 1 100 1" material="src: #player-area" position="-5 0.1 -2.8" scale="10 0.1 2.2"></a-box>
      <a-box id="p2-join-box" join-game-p2 n-box-collider="isTrigger: true; type: object; size: 1 100 1" material="src: #player-area"  position="-5 0.1 8" scale="10 0.1 2.2"></a-box>
      <a-plane material="src: #board" scale="10 8.5" rotation="270 0" position="-5 0 2.6"></a-plane>
      <a-entity id="join-game-p1-text" n-text="text: Step on here to join game! :)" position="-5 1.9 -3" scale="0.4 0.4 0.4" n-billboard></a-entity>
      <a-entity id="join-game-p2-text" n-text="text: Step on here to join game! :)" position="-5 1.9 8.4" scale="0.4 0.4 0.4" rotation="0 180 0" n-billboard></a-entity>
      <a-entity id="game-manager" start-game></a-entity>
		</a-scene>
	</body>
</html>

